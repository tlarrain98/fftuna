{"ast":null,"code":"/*!\n * random-bytes\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n'use strict';\n/**\n * Module dependencies.\n * @private\n */\n\nvar crypto = require('crypto');\n/**\n * Module variables.\n * @private\n */\n\n\nvar generateAttempts = crypto.randomBytes === crypto.pseudoRandomBytes ? 1 : 3;\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = randomBytes;\nmodule.exports.sync = randomBytesSync;\n/**\n * Generates strong pseudo-random bytes.\n *\n * @param {number} size\n * @param {function} [callback]\n * @return {Promise}\n * @public\n */\n\nfunction randomBytes(size, callback) {\n  // validate callback is a function, if provided\n  if (callback !== undefined && typeof callback !== 'function') {\n    throw new TypeError('argument callback must be a function');\n  } // require the callback without promises\n\n\n  if (!callback && !global.Promise) {\n    throw new TypeError('argument callback is required');\n  }\n\n  if (callback) {\n    // classic callback style\n    return generateRandomBytes(size, generateAttempts, callback);\n  }\n\n  return new Promise(function executor(resolve, reject) {\n    generateRandomBytes(size, generateAttempts, function onRandomBytes(err, str) {\n      if (err) return reject(err);\n      resolve(str);\n    });\n  });\n}\n/**\n * Generates strong pseudo-random bytes sync.\n *\n * @param {number} size\n * @return {Buffer}\n * @public\n */\n\n\nfunction randomBytesSync(size) {\n  var err = null;\n\n  for (var i = 0; i < generateAttempts; i++) {\n    try {\n      return crypto.randomBytes(size);\n    } catch (e) {\n      err = e;\n    }\n  }\n\n  throw err;\n}\n/**\n * Generates strong pseudo-random bytes.\n *\n * @param {number} size\n * @param {number} attempts\n * @param {function} callback\n * @private\n */\n\n\nfunction generateRandomBytes(size, attempts, callback) {\n  crypto.randomBytes(size, function onRandomBytes(err, buf) {\n    if (!err) return callback(null, buf);\n    if (! --attempts) return callback(err);\n    setTimeout(generateRandomBytes.bind(null, size, attempts, callback), 10);\n  });\n}","map":{"version":3,"sources":["C:/Users/tlarr/ffwebsite/node_modules/random-bytes/index.js"],"names":["crypto","require","generateAttempts","randomBytes","pseudoRandomBytes","module","exports","sync","randomBytesSync","size","callback","undefined","TypeError","global","Promise","generateRandomBytes","executor","resolve","reject","onRandomBytes","err","str","i","e","attempts","buf","setTimeout","bind"],"mappings":"AAAA;;;;;AAMA;AAEA;;;;;AAKA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;AAEA;;;;;;AAKA,IAAIC,gBAAgB,GAAGF,MAAM,CAACG,WAAP,KAAuBH,MAAM,CAACI,iBAA9B,GAAkD,CAAlD,GAAsD,CAA7E;AAEA;;;;;AAKAC,MAAM,CAACC,OAAP,GAAiBH,WAAjB;AACAE,MAAM,CAACC,OAAP,CAAeC,IAAf,GAAsBC,eAAtB;AAEA;;;;;;;;;AASA,SAASL,WAAT,CAAqBM,IAArB,EAA2BC,QAA3B,EAAqC;AACnC;AACA,MAAIA,QAAQ,KAAKC,SAAb,IAA0B,OAAOD,QAAP,KAAoB,UAAlD,EAA8D;AAC5D,UAAM,IAAIE,SAAJ,CAAc,sCAAd,CAAN;AACD,GAJkC,CAMnC;;;AACA,MAAI,CAACF,QAAD,IAAa,CAACG,MAAM,CAACC,OAAzB,EAAkC;AAChC,UAAM,IAAIF,SAAJ,CAAc,+BAAd,CAAN;AACD;;AAED,MAAIF,QAAJ,EAAc;AACZ;AACA,WAAOK,mBAAmB,CAACN,IAAD,EAAOP,gBAAP,EAAyBQ,QAAzB,CAA1B;AACD;;AAED,SAAO,IAAII,OAAJ,CAAY,SAASE,QAAT,CAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AACpDH,IAAAA,mBAAmB,CAACN,IAAD,EAAOP,gBAAP,EAAyB,SAASiB,aAAT,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC3E,UAAID,GAAJ,EAAS,OAAOF,MAAM,CAACE,GAAD,CAAb;AACTH,MAAAA,OAAO,CAACI,GAAD,CAAP;AACD,KAHkB,CAAnB;AAID,GALM,CAAP;AAMD;AAED;;;;;;;;;AAQA,SAASb,eAAT,CAAyBC,IAAzB,EAA+B;AAC7B,MAAIW,GAAG,GAAG,IAAV;;AAEA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,gBAApB,EAAsCoB,CAAC,EAAvC,EAA2C;AACzC,QAAI;AACF,aAAOtB,MAAM,CAACG,WAAP,CAAmBM,IAAnB,CAAP;AACD,KAFD,CAEE,OAAOc,CAAP,EAAU;AACVH,MAAAA,GAAG,GAAGG,CAAN;AACD;AACF;;AAED,QAAMH,GAAN;AACD;AAED;;;;;;;;;;AASA,SAASL,mBAAT,CAA6BN,IAA7B,EAAmCe,QAAnC,EAA6Cd,QAA7C,EAAuD;AACrDV,EAAAA,MAAM,CAACG,WAAP,CAAmBM,IAAnB,EAAyB,SAASU,aAAT,CAAuBC,GAAvB,EAA4BK,GAA5B,EAAiC;AACxD,QAAI,CAACL,GAAL,EAAU,OAAOV,QAAQ,CAAC,IAAD,EAAOe,GAAP,CAAf;AACV,QAAI,CAAC,GAAED,QAAP,EAAiB,OAAOd,QAAQ,CAACU,GAAD,CAAf;AACjBM,IAAAA,UAAU,CAACX,mBAAmB,CAACY,IAApB,CAAyB,IAAzB,EAA+BlB,IAA/B,EAAqCe,QAArC,EAA+Cd,QAA/C,CAAD,EAA2D,EAA3D,CAAV;AACD,GAJD;AAKD","sourcesContent":["/*!\n * random-bytes\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar crypto = require('crypto')\n\n/**\n * Module variables.\n * @private\n */\n\nvar generateAttempts = crypto.randomBytes === crypto.pseudoRandomBytes ? 1 : 3\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = randomBytes\nmodule.exports.sync = randomBytesSync\n\n/**\n * Generates strong pseudo-random bytes.\n *\n * @param {number} size\n * @param {function} [callback]\n * @return {Promise}\n * @public\n */\n\nfunction randomBytes(size, callback) {\n  // validate callback is a function, if provided\n  if (callback !== undefined && typeof callback !== 'function') {\n    throw new TypeError('argument callback must be a function')\n  }\n\n  // require the callback without promises\n  if (!callback && !global.Promise) {\n    throw new TypeError('argument callback is required')\n  }\n\n  if (callback) {\n    // classic callback style\n    return generateRandomBytes(size, generateAttempts, callback)\n  }\n\n  return new Promise(function executor(resolve, reject) {\n    generateRandomBytes(size, generateAttempts, function onRandomBytes(err, str) {\n      if (err) return reject(err)\n      resolve(str)\n    })\n  })\n}\n\n/**\n * Generates strong pseudo-random bytes sync.\n *\n * @param {number} size\n * @return {Buffer}\n * @public\n */\n\nfunction randomBytesSync(size) {\n  var err = null\n\n  for (var i = 0; i < generateAttempts; i++) {\n    try {\n      return crypto.randomBytes(size)\n    } catch (e) {\n      err = e\n    }\n  }\n\n  throw err\n}\n\n/**\n * Generates strong pseudo-random bytes.\n *\n * @param {number} size\n * @param {number} attempts\n * @param {function} callback\n * @private\n */\n\nfunction generateRandomBytes(size, attempts, callback) {\n  crypto.randomBytes(size, function onRandomBytes(err, buf) {\n    if (!err) return callback(null, buf)\n    if (!--attempts) return callback(err)\n    setTimeout(generateRandomBytes.bind(null, size, attempts, callback), 10)\n  })\n}\n"]},"metadata":{},"sourceType":"script"}